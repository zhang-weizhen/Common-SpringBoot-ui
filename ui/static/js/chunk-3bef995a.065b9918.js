(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bef995a","chunk-248f934e"],{"241d":function(t,e,s){"use strict";s("ec81")},4612:function(t,e,s){},"6cf6":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("transition",{attrs:{name:"el-zoom-in-center"}},[s("ul",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"el-dropdown-menu el-popper el-dropdown-menu--medium custom-contextmenu",style:"top: "+t.dropdowns.y+"px;left: "+t.dropdowns.x+"px;",attrs:{"x-placement":"bottom-end",id:"contextmenu"}},[t._l(t.dropdownList,(function(e,i){return s("li",{key:i,staticClass:"el-dropdown-menu__item",on:{click:function(s){return t.onCurrentContextmenuClick(e.id)}}},[e.affix?t._e():[s("i",{class:e.icon}),s("span",[t._v(t._s(t.$t(e.txt)))])]],2)})),s("div",{staticClass:"popper__arrow",style:{left:t.arrowLeft+"px"},attrs:{"x-arrow":""}})],2)])],1)},a=[],o={name:"layoutTagsViewContextmenu",props:{dropdown:{type:Object}},data(){return{isShow:!1,dropdownList:[{id:0,txt:"message.tagsView.refresh",affix:!1,icon:"el-icon-refresh-right"},{id:1,txt:"message.tagsView.close",affix:!1,icon:"el-icon-close"},{id:2,txt:"message.tagsView.closeOther",affix:!1,icon:"el-icon-circle-close"},{id:3,txt:"message.tagsView.closeAll",affix:!1,icon:"el-icon-folder-delete"}],path:{},arrowLeft:5}},computed:{dropdowns(){return this.dropdown.x+99>document.documentElement.clientWidth?{x:document.documentElement.clientWidth-99-5,y:this.dropdown.y}:this.dropdown}},mounted(){document.body.addEventListener("click",this.closeContextmenu)},methods:{onCurrentContextmenuClick(t){this.$emit("currentContextmenuClick",{id:t,path:this.path})},openContextmenu(t){this.path=t.path,t.meta.isAffix?this.dropdownList[1].affix=!0:this.dropdownList[1].affix=!1,this.closeContextmenu(),setTimeout(()=>{this.isShow=!0},80)},closeContextmenu(){this.isShow=!1}},destroyed(){document.body.removeEventListener("click",this.closeContextmenu)},watch:{dropdown:{handler({x:t}){t+99>document.documentElement.clientWidth?this.arrowLeft=99-(document.documentElement.clientWidth-t):this.arrowLeft=10},deep:!0}}},n=o,r=(s("241d"),s("2877")),h=Object(r["a"])(n,i,a,!1,null,"0d0eb624",null);e["default"]=h.exports},a91a:function(t,e,s){"use strict";s("4612")},cd49:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"layout-navbars-tagsview"},[s("el-scrollbar",{ref:"scrollbarRef",nativeOn:{wheel:function(e){return e.preventDefault(),t.onHandleScroll.apply(null,arguments)}}},[s("ul",{ref:"tagsUlRef",staticClass:"layout-navbars-tagsview-ul",class:t.setTagsStyle},t._l(t.tagsViewList,(function(e,i){return s("li",{key:i,ref:"tagsRefs",refInFor:!0,staticClass:"layout-navbars-tagsview-ul-li",class:{"is-active":e.path===t.tagsRoutePath},attrs:{"data-name":e.name},on:{contextmenu:function(s){return s.preventDefault(),t.onContextmenu(e,s)},click:function(s){return t.onTagsClick(e,i)}}},[e.path===t.tagsRoutePath?s("i",{staticClass:"iconfont icon-webicon318 layout-navbars-tagsview-ul-li-iconfont font14"}):t._e(),e.path!==t.tagsRoutePath&&t.getThemeConfig.isTagsviewIcon?s("i",{staticClass:"layout-navbars-tagsview-ul-li-iconfont font14 is-tagsview-icon",class:e.meta.icon}):t._e(),s("span",[t._v(t._s(t.$t(e.meta.title)))]),e.path===t.tagsRoutePath?s("i",{staticClass:"el-icon-refresh-right layout-navbars-tagsview-ul-li-icon ml5",on:{click:function(s){return s.stopPropagation(),t.refreshCurrentTagsView(e.path)}}}):t._e(),e.meta.isAffix?t._e():s("i",{staticClass:"el-icon-close layout-navbars-tagsview-ul-li-icon ml5",on:{click:function(s){return s.stopPropagation(),t.closeCurrentTagsView(e.path)}}})])})),0)]),s("Contextmenu",{ref:"tagsContextmenu",attrs:{dropdown:t.tagsDropdown},on:{currentContextmenuClick:t.onCurrentContextmenuClick}})],1)},a=[],o=(s("14d9"),s("13d5"),s("6cf6")),n=s("5d2d"),r={name:"tagsView",components:{Contextmenu:o["default"]},data(){return{userInfo:{},tagsViewList:[],tagsDropdown:{x:"",y:""},tagsRefsIndex:0,tagsRoutePath:this.$route.path,tagsViewRoutesList:[]}},computed:{getThemeConfig(){return this.$store.state.themeConfig.themeConfig},setTagsStyle(){return this.$store.state.themeConfig.themeConfig.tagsStyle}},created(){this.bus.$on("onCurrentContextmenuClick",t=>{this.onCurrentContextmenuClick(t)})},mounted(){this.getTagsViewRoutes()},methods:{getRoutesList(){return this.$store.state.routesList.routesList},onTagsClick(t,e){this.tagsRoutePath=t.path,this.tagsRefsIndex=e,this.$router.push(t)},getTagsRefsIndex(t){this.tagsViewList.length>0&&(this.tagsRefsIndex=this.tagsViewList.findIndex(e=>e.path===t))},onHandleScroll(t){this.$refs.scrollbarRef.$refs.wrap.scrollLeft+=t.wheelDelta/4},tagsViewmoveToCurrentTag(){this.$nextTick(()=>{const t=this.$refs.tagsRefs;if(t.length<=0)return!1;let e=t[this.tagsRefsIndex],s=this.tagsRefsIndex,i=t.length,a=t[0],o=t[t.length-1],n=this.$refs.scrollbarRef.$refs.wrap,r=n.scrollWidth,h=n.offsetWidth,u=n.scrollLeft,l=t[this.tagsRefsIndex-1],c=t[this.tagsRefsIndex+1],d="",f="";e===a?n.scrollLeft=0:e===o?n.scrollLeft=r-h:(d=0===s?(null===a||void 0===a?void 0:a.offsetLeft)-5:(null===l||void 0===l?void 0:l.offsetLeft)-5,f=s===i?(null===o||void 0===o?void 0:o.offsetLeft)+o.offsetWidth+5:(null===c||void 0===c?void 0:c.offsetLeft)+c.offsetWidth+5,f>u+h?n.scrollLeft=f-h:d<u&&(n.scrollLeft=d)),this.updateScrollbar()})},updateScrollbar(){this.$refs.scrollbarRef.update()},filterCurrentMenu(t,e,s){t.map(t=>{if(t.path===e)return s(t),!1;t=Object.assign({},t),t.children&&(t.children=this.filterCurrentMenu(t.children,e,s))})},duplicate(t){let e={};return t=t.reduce((t,s)=>(!e[s.path]&&(e[s.path]=t.push(s)),t),[]),t},getTagsViewRoutes(){this.tagsRoutePath=this.$route.path,this.tagsViewList=[],this.$store.state.themeConfig.themeConfig.isCacheTagsView||n["Session"].remove("tagsViewList"),this.tagsViewRoutesList=this.$store.state.tagsViewRoutes.tagsViewRoutes,this.initTagsViewList()},addBrowserSetSession(t){n["Session"].set("tagsViewList",t)},initTagsViewList(){n["Session"].get("tagsViewList")&&this.$store.state.themeConfig.themeConfig.isCacheTagsView?this.tagsViewList=n["Session"].get("tagsViewList"):(this.tagsViewRoutesList.map(t=>{t.meta.isAffix&&!t.meta.isHide&&this.tagsViewList.push({...t})}),this.addTagsView(this.$route.path)),this.getTagsRefsIndex(this.$route.path),this.tagsViewmoveToCurrentTag()},addTagsView(t,e){if(this.tagsViewList.some(e=>e.path===t))return!1;const s=this.tagsViewRoutesList.find(e=>e.path===t);if(s.meta.isLink&&!s.meta.isIframe)return!1;s.query=null!==e&&void 0!==e&&e.query?null===e||void 0===e?void 0:e.query:this.$route.query,this.tagsViewList.push({...s}),this.addBrowserSetSession(this.tagsViewList)},onContextmenu(t,e){let{clientX:s,clientY:i}=e;this.tagsDropdown.x=s,this.tagsDropdown.y=i,this.$refs.tagsContextmenu.openContextmenu(t)},onCurrentContextmenuClick(t){let{id:e,path:s}=t,i=this.tagsViewList.find(t=>t.path===s);switch(e){case 0:this.refreshCurrentTagsView(s),this.$router.push({path:s,query:i.query});break;case 1:this.closeCurrentTagsView(s);break;case 2:this.$router.push({path:s,query:i.query}),this.closeOtherTagsView(s);break;case 3:this.closeAllTagsView(s);break}},refreshCurrentTagsView(t){this.bus.$emit("onTagsViewRefreshRouterView",t)},closeCurrentTagsView(t){this.tagsViewList.map((e,s,i)=>{e.meta.isAffix||e.path===t&&(this.tagsViewList.splice(s,1),setTimeout(()=>{this.tagsViewList.length===s?this.$router.push({path:i[i.length-1].path,query:i[i.length-1].query}):this.$router.push({path:i[s].path,query:i[s].query})},0))}),this.addBrowserSetSession(this.tagsViewList)},closeOtherTagsView(t){this.tagsViewList=[],this.tagsViewRoutesList.map(t=>{t.meta.isAffix&&!t.meta.isHide&&this.tagsViewList.push({...t})}),this.addTagsView(t)},closeAllTagsView(t){this.tagsViewList=[],this.tagsViewRoutesList.map(e=>{e.meta.isAffix&&!e.meta.isHide&&(this.tagsViewList.push({...e}),this.tagsViewList.some(e=>e.path===t)?this.$router.push({path:t,query:this.$route.query}):this.$router.push({path:e.path,query:this.$route.query}))}),this.addBrowserSetSession(this.tagsViewList)}},watch:{$route:{handler(t){this.tagsRoutePath=t.path,this.addTagsView(t.path,t),this.getTagsRefsIndex(t.path),this.tagsViewmoveToCurrentTag()},deep:!0}},destroyed(){this.bus.$off("onCurrentContextmenuClick")}},h=r,u=(s("a91a"),s("2877")),l=Object(u["a"])(h,i,a,!1,null,"5e2c4d82",null);e["default"]=l.exports},ec81:function(t,e,s){}}]);