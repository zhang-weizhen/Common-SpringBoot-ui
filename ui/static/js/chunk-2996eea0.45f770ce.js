(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2996eea0","chunk-2d230cad"],{"32ab":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.state.fullscreenLoading,expression:"state.fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"system-user-container layout-padding"},[a("el-card",{staticClass:"layout-padding-auto",attrs:{shadow:"hover"}},[a("div",{staticClass:"system-user-search mb15"},[a("el-input",{staticStyle:{"max-width":"180px"},attrs:{size:"default",placeholder:"请输入名称"},model:{value:t.state.tableData.param.keyword,callback:function(e){t.$set(t.state.tableData.param,"keyword",e)},expression:"state.tableData.param.keyword"}}),a("el-button",{staticClass:"ml10",attrs:{size:"default",type:"primary"},on:{click:function(e){return t.fetchData()}}},[a("el-icon",[a("ele-Search")],1),t._v(" 查询 ")],1),a("el-button",{staticClass:"ml10",attrs:{size:"default",type:"success"},on:{click:function(e){return t.showUploadDialog()}}},[a("el-icon",[a("ele-FolderAdd")],1),t._v(" 上传APK ")],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.state.tableData.loading,expression:"state.tableData.loading"}],staticStyle:{width:"100%"},attrs:{data:t.state.tableData.data}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"updateContent",label:"更新内容","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"appName",label:"APP名","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"versionCode",label:"版本码","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"versionName",label:"版本号","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"packageName",label:"包名","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"downloadUrl",label:"下载地址","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"fileName",label:"文件名","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"md5Value",label:"MD5值","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"fileSize",label:"文件大小","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"isForce",label:"强制安装","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.isForce?a("el-tag",{attrs:{type:"primary"}},[t._v("是")]):a("el-tag",{attrs:{type:"info"}},[t._v("否")])]}}])}),a("el-table-column",{attrs:{prop:"isIgnorable",label:"忽略该版本","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.isIgnorable?a("el-tag",{attrs:{type:"primary"}},[t._v("是")]):a("el-tag",{attrs:{type:"info"}},[t._v("否")])]}}])}),a("el-table-column",{attrs:{prop:"isSilent",label:"静默下载","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.isSilent?a("el-tag",{attrs:{type:"primary"}},[t._v("是")]):a("el-tag",{attrs:{type:"info"}},[t._v("否")])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",text:"",type:"primary"},on:{click:function(a){return t.onRowDel(e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticClass:"mt15",attrs:{"pager-count":5,"page-sizes":[10,20,30],"current-page":t.state.tableData.param.current,background:"","page-size":t.state.tableData.param.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.state.tableData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"上传APK",visible:t.state.dialog.isShowUploadDialog,width:"400px"},on:{"update:visible":function(e){return t.$set(t.state.dialog,"isShowUploadDialog",e)}}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","list-type":"apk",action:"/sys/oss/upload/apk","on-success":t.apkUploadSuccess,"on-progress":t.apkUploading}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传APK文件，且不超过100MB")])])],1),a("el-dialog",{attrs:{title:t.state.dialog.title,visible:t.state.dialog.isShowDialog,width:"769px"},on:{"update:visible":function(e){return t.$set(t.state.dialog,"isShowDialog",e)}}},[a("div",[a("el-form",{ref:"userDialogFormRef",attrs:{model:t.state.ruleForm,size:"default","label-width":"120px"}},[a("el-row",{attrs:{gutter:35}},[a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"APP名"}},[a("el-input",{attrs:{disabled:"",placeholder:"APP名",clearable:""},model:{value:t.state.ruleForm.appName,callback:function(e){t.$set(t.state.ruleForm,"appName",e)},expression:"state.ruleForm.appName"}})],1)],1),a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"包名"}},[a("el-input",{attrs:{disabled:"",placeholder:"包名",clearable:""},model:{value:t.state.ruleForm.packageName,callback:function(e){t.$set(t.state.ruleForm,"packageName",e)},expression:"state.ruleForm.packageName"}})],1)],1)],1),a("el-row",{attrs:{gutter:35}},[a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"版本码"}},[a("el-input",{attrs:{disabled:"",placeholder:"版本码",clearable:""},model:{value:t.state.ruleForm.versionCode,callback:function(e){t.$set(t.state.ruleForm,"versionCode",e)},expression:"state.ruleForm.versionCode"}})],1)],1),a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"版本号"}},[a("el-input",{attrs:{disabled:"",placeholder:"版本号",clearable:""},model:{value:t.state.ruleForm.versionName,callback:function(e){t.$set(t.state.ruleForm,"versionName",e)},expression:"state.ruleForm.versionName"}})],1)],1)],1),a("el-row",{attrs:{gutter:35}},[a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"下载地址"}},[a("el-input",{attrs:{disabled:"",placeholder:"下载地址",clearable:""},model:{value:t.state.ruleForm.downloadUrl,callback:function(e){t.$set(t.state.ruleForm,"downloadUrl",e)},expression:"state.ruleForm.downloadUrl"}})],1)],1),a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"文件名"}},[a("el-input",{attrs:{disabled:"",placeholder:"文件名",clearable:""},model:{value:t.state.ruleForm.fileName,callback:function(e){t.$set(t.state.ruleForm,"fileName",e)},expression:"state.ruleForm.fileName"}})],1)],1)],1),a("el-row",{attrs:{gutter:35}},[a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"MD5值"}},[a("el-input",{attrs:{disabled:"",placeholder:"MD5值",clearable:""},model:{value:t.state.ruleForm.md5Value,callback:function(e){t.$set(t.state.ruleForm,"md5Value",e)},expression:"state.ruleForm.md5Value"}})],1)],1),a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"文件大小"}},[a("el-input",{attrs:{disabled:"",placeholder:"文件大小",clearable:""},model:{value:t.state.ruleForm.fileSize,callback:function(e){t.$set(t.state.ruleForm,"fileSize",e)},expression:"state.ruleForm.fileSize"}})],1)],1)],1),a("el-row",{attrs:{gutter:35}},[a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"强制安装"}},[a("el-radio-group",{model:{value:t.state.ruleForm.isForce,callback:function(e){t.$set(t.state.ruleForm,"isForce",e)},expression:"state.ruleForm.isForce"}},[a("el-radio-button",{attrs:{label:0}},[t._v("是")]),a("el-radio-button",{attrs:{label:1}},[t._v("否")])],1)],1)],1),a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"可忽略该版本"}},[a("el-radio-group",{model:{value:t.state.ruleForm.isIgnorable,callback:function(e){t.$set(t.state.ruleForm,"isIgnorable",e)},expression:"state.ruleForm.isIgnorable"}},[a("el-radio-button",{attrs:{label:0}},[t._v("是")]),a("el-radio-button",{attrs:{label:1}},[t._v("否")])],1)],1)],1)],1),a("el-row",{attrs:{gutter:35}},[a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"静默下载"}},[a("el-radio-group",{model:{value:t.state.ruleForm.isSilent,callback:function(e){t.$set(t.state.ruleForm,"isSilent",e)},expression:"state.ruleForm.isSilent"}},[a("el-radio-button",{attrs:{label:0}},[t._v("是")]),a("el-radio-button",{attrs:{label:1}},[t._v("否")])],1)],1)],1)],1),a("el-row",{attrs:{gutter:35}},[a("el-col",{staticClass:"mb20",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-form-item",{attrs:{label:"更新内容"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"更新内容",clearable:""},model:{value:t.state.ruleForm.updateContent,callback:function(e){t.$set(t.state.ruleForm,"updateContent",e)},expression:"state.ruleForm.updateContent"}})],1)],1)],1)],1),[a("span",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"default"},on:{click:t.onCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.state.submitBtn.loading,size:"default"},on:{click:t.onSubmit}},[t._v(t._s(t.state.dialog.submitTxt))])],1)]],2)])],1)},s=[],o=a("ee90"),r=a("5c96"),i={name:"apk",data(){return{state:{fullscreenLoading:!1,tableData:{data:[],total:0,loading:!1,param:{current:1,limit:10,keyword:""}},dialog:{isShowUploadDialog:!1,isShowDialog:!1,type:"",title:"",submitTxt:""},ruleForm:{updateContent:"",versionCode:"",versionName:"",packageName:"",downloadUrl:"",appName:"",md5Value:"",fileName:"",fileSize:0,isForce:0,isIgnorable:1,isSilent:0},submitBtn:{loading:!1,type:""}}}},methods:{fetchData(){this.state.ruleForm={},this.state.tableData.loading=!0,Object(o["useApkApi"])().list(this.state.tableData.param).then(t=>{this.state.tableData.data=t.data.records,this.state.tableData.total=t.data.total,this.state.tableData.loading=!1})},showUploadDialog(){this.state.dialog.isShowUploadDialog=!0},apkUploading(t,e,a){this.state.fullscreenLoading=!0},apkUploadSuccess(t,e,a){console.log(t),this.state.fullscreenLoading=!1,0==t.code?this.onOpenAddOrEdit(t.data):r["Message"].error(t.msg)},onOpenAddOrEdit(t){this.state.submitBtn.type="add",this.state.ruleForm={updateContent:"",versionCode:t.versionCode,versionName:t.versionName,packageName:t.packageName,downloadUrl:t.downloadUrl,appName:t.appName,md5Value:t.md5Value,fileName:t.fileName,fileSize:t.fileSize,isForce:0,isIgnorable:1,isSilent:0},this.state.dialog.title="上传APK",this.state.dialog.submitTxt="新 增",this.state.dialog.isShowDialog=!0},onRowDel(t){r["MessageBox"].confirm("此操作将永久删除，是否继续?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{this.deleteInfo(t)}).catch(()=>{})},handleSizeChange(t){this.state.tableData.data=[],this.state.tableData.param.limit=t,this.fetchData()},handleCurrentChange(t){this.state.tableData.data=[],this.state.tableData.param.current=t,this.fetchData()},closeDialog(){this.state.dialog.isShowDialog=!1,this.state.dialog.isShowUploadDialog=!1},onCancel(){this.closeDialog()},onSubmit(){this.state.submitBtn.loading=!0,Object(o["useApkApi"])().add(this.state.ruleForm).then(t=>{this.state.submitBtn.loading=!1,this.closeDialog(),this.fetchData()}).catch(()=>{this.state.submitBtn.loading=!1})},deleteInfo(t){Object(o["useApkApi"])().delete(t).then(t=>{r["Message"].success("删除成功"),this.fetchData()}).catch(()=>{this.fetchData()})}},computed:{},created(){},mounted(){this.fetchData()}},n=i,d=a("2877"),u=Object(d["a"])(n,l,s,!1,null,"267d28e1",null);e["default"]=u.exports},ee90:function(t,e,a){"use strict";a.r(e),a.d(e,"useApkApi",(function(){return s}));var l=a("b775");function s(){return{list:t=>Object(l["default"])({url:"/apk/version/list",method:"get",params:t}),add:t=>Object(l["default"])({url:"/apk/version/save",method:"post",data:t}),update:t=>Object(l["default"])({url:"/apk/version/update",method:"post",data:t}),delete:t=>Object(l["default"])({url:"/apk/version/delete",method:"post",data:t})}}}}]);